import{lazy as Ke,createComponent as Ge,sharedConfig as Ee}from"solid-js";import{ssrElement as j,escape as Xe,mergeProps as Ye,ssr as Ze,renderToString as Je}from"solid-js/web";import{provideRequestEvent as Pe}from"solid-js/web/storage";import{H3Event as H,setResponseStatus as Qe,appendResponseHeader as et,setHeader as tt,getRequestIP as rt,getResponseStatus as st,getResponseStatusText as it,getCookie as at,setCookie as nt,getRequestURL as ot,getResponseHeaders as lt,getResponseHeader as ut,setResponseHeader as ct,removeResponseHeader as dt,getRequestWebStream as ht,eventHandler as ft}from"h3";import{AsyncLocalStorage as pt}from"node:async_hooks";var vt=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e))(vt||{});function gt(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function p(e){let t="",r=0,s;for(let i=0,a=e.length;i<a;i++)s=gt(e[i]),s&&(t+=e.slice(r,i)+s,r=i+1);return r===0?t=e:t+=e.slice(r),t}function mt(e){switch(e){case"\\\\":return"\\";case'\\"':return'"';case"\\n":return`
`;case"\\r":return"\r";case"\\b":return"\b";case"\\t":return"	";case"\\f":return"\f";case"\\x3C":return"<";case"\\u2028":return"\u2028";case"\\u2029":return"\u2029";default:return e}}function m(e){return e.replace(/(\\\\|\\"|\\n|\\r|\\b|\\t|\\f|\\u2028|\\u2029|\\x3C)/g,mt)}var S="__SEROVAL_REFS__",C="$R",k=`self.${C}`;function yt(e){return e==null?`${k}=${k}||[]`:`(${k}=${k}||{})["${p(e)}"]=[]`}function v(e,t){if(!e)throw t}var ke=new Map,b=new Map;function W(e){return ke.has(e)}function bt(e){return b.has(e)}function zt(e){return v(W(e),new rr(e)),ke.get(e)}function wt(e){return v(bt(e),new sr(e)),b.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,S,{value:b,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,S,{value:b,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,S,{value:b,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,S,{value:b,configurable:!0,writable:!1,enumerable:!1});function Fe(e,t){for(let r=0,s=t.length;r<s;r++){let i=t[r];e.has(i)||(e.add(i),i.extends&&Fe(e,i.extends))}}function Ce(e){if(e){let t=new Set;return Fe(t,e),[...t]}}var St={0:"Symbol.asyncIterator",1:"Symbol.hasInstance",2:"Symbol.isConcatSpreadable",3:"Symbol.iterator",4:"Symbol.match",5:"Symbol.matchAll",6:"Symbol.replace",7:"Symbol.search",8:"Symbol.species",9:"Symbol.split",10:"Symbol.toPrimitive",11:"Symbol.toStringTag",12:"Symbol.unscopables"},Te={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},Rt={0:Symbol.asyncIterator,1:Symbol.hasInstance,2:Symbol.isConcatSpreadable,3:Symbol.iterator,4:Symbol.match,5:Symbol.matchAll,6:Symbol.replace,7:Symbol.search,8:Symbol.species,9:Symbol.split,10:Symbol.toPrimitive,11:Symbol.toStringTag,12:Symbol.unscopables},At={2:"!0",3:"!1",1:"void 0",0:"null",4:"-0",5:"1/0",6:"-1/0",7:"0/0"},It={2:!0,3:!1,1:void 0,0:null,4:-0,5:Number.POSITIVE_INFINITY,6:Number.NEGATIVE_INFINITY,7:Number.NaN},Oe={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},xt={0:Error,1:EvalError,2:RangeError,3:ReferenceError,4:SyntaxError,5:TypeError,6:URIError};function g(e){return{t:2,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}var B=g(2),K=g(3),Et=g(1),Pt=g(0),kt=g(4),Ft=g(5),Ct=g(6),Tt=g(7);function ie(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function Ot(e){let t=Oe[ie(e)];return e.name!==t?{name:e.name}:e.constructor.name!==t?{name:e.constructor.name}:{}}function ue(e,t){let r=Ot(e),s=Object.getOwnPropertyNames(e);for(let i=0,a=s.length,n;i<a;i++)n=s[i],n!=="name"&&n!=="message"&&(n==="stack"?t&4&&(r=r||{},r[n]=e[n]):(r=r||{},r[n]=e[n]));return r}function $e(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function $t(e){switch(e){case Number.POSITIVE_INFINITY:return Ft;case Number.NEGATIVE_INFINITY:return Ct}return e!==e?Tt:Object.is(e,-0)?kt:{t:0,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function G(e){return{t:1,i:void 0,s:p(e),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function jt(e){return{t:3,i:void 0,s:""+e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Vt(e){return{t:4,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Nt(e,t){return{t:5,i:e,s:t.toISOString(),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,f:void 0,a:void 0,b:void 0,o:void 0}}function Dt(e,t){return{t:6,i:e,s:void 0,l:void 0,c:p(t.source),m:t.flags,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function _t(e,t){let r=new Uint8Array(t),s=r.length,i=new Array(s);for(let a=0;a<s;a++)i[a]=r[a];return{t:19,i:e,s:i,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Mt(e,t){return{t:17,i:e,s:Te[t],l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function ce(e,t){return{t:18,i:e,s:p(zt(t)),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function je(e,t,r){return{t:25,i:e,s:r,l:void 0,c:p(t),m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Lt(e,t,r){return{t:9,i:e,s:void 0,l:t.length,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:$e(t)}}function Ut(e,t){return{t:21,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function qt(e,t,r){return{t:15,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function Ht(e,t,r){return{t:16,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function Wt(e,t,r){return{t:20,i:e,s:void 0,l:t.byteLength,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function Bt(e,t,r){return{t:13,i:e,s:ie(t),l:void 0,c:void 0,m:p(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Kt(e,t,r){return{t:14,i:e,s:ie(t),l:void 0,c:void 0,m:p(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Gt(e,t,r){return{t:7,i:e,s:void 0,l:t,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:void 0}}function Ve(e,t){return{t:28,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function Ne(e,t){return{t:30,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function De(e,t,r){return{t:31,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:t,b:void 0,o:void 0}}function Xt(e,t){return{t:32,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function Yt(e,t){return{t:33,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function Zt(e,t){return{t:34,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}var{toString:ae}=Object.prototype;function Jt(e,t){return t instanceof Error?`Seroval caught an error during the ${e} process.
  
${t.name}
${t.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${ae.call(t)}"

For more information, please check the "cause" property of this error.`}var ne=class extends Error{constructor(t,r){super(Jt(t,r)),this.cause=r}},Qt=class extends ne{constructor(t){super("parsing",t)}},er=class extends ne{constructor(e){super("serialization",e)}},tr=class extends ne{constructor(e){super("deserialization",e)}},T=class extends Error{constructor(t){super(`The value ${ae.call(t)} of type "${typeof t}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=t}},_e=class extends Error{constructor(t){super('Unsupported node type "'+t.t+'".')}},Me=class extends Error{constructor(e){super('Missing plugin for tag "'+e+'".')}},w=class extends Error{constructor(t){super('Missing "'+t+'" instance.')}},rr=class extends Error{constructor(t){super('Missing reference for the value "'+ae.call(t)+'" of type "'+typeof t+'"'),this.value=t}},sr=class extends Error{constructor(e){super('Missing reference for id "'+p(e)+'"')}},ir=class extends Error{constructor(e){super('Unknown TypedArray "'+e+'"')}},ar={},nr={},or={0:{},1:{},2:{},3:{},4:{}};function X(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve(r){e(r)},reject(r){t(r)}}}function lr(e){return"__SEROVAL_STREAM__"in e}function P(){let e=new Set,t=[],r=!0,s=!0;function i(o){for(let l of e.keys())l.next(o)}function a(o){for(let l of e.keys())l.throw(o)}function n(o){for(let l of e.keys())l.return(o)}return{__SEROVAL_STREAM__:!0,on(o){r&&e.add(o);for(let l=0,u=t.length;l<u;l++){let d=t[l];l===u-1&&!r?s?o.return(d):o.throw(d):o.next(d)}return()=>{r&&e.delete(o)}},next(o){r&&(t.push(o),i(o))},throw(o){r&&(t.push(o),a(o),r=!1,s=!1,e.clear())},return(o){r&&(t.push(o),n(o),r=!1,s=!0,e.clear())}}}function ur(e){let t=P(),r=e[Symbol.asyncIterator]();async function s(){try{let i=await r.next();i.done?t.return(i.value):(t.next(i.value),await s())}catch(i){t.throw(i)}}return s().catch(()=>{}),t}function cr(e){return()=>{let t=[],r=[],s=0,i=-1,a=!1;function n(){for(let l=0,u=r.length;l<u;l++)r[l].resolve({done:!0,value:void 0})}e.on({next(l){let u=r.shift();u&&u.resolve({done:!1,value:l}),t.push(l)},throw(l){let u=r.shift();u&&u.reject(l),n(),i=t.length,t.push(l),a=!0},return(l){let u=r.shift();u&&u.resolve({done:!0,value:l}),n(),i=t.length,t.push(l)}});function o(){let l=s++,u=t[l];if(l!==i)return{done:!1,value:u};if(a)throw u;return{done:!0,value:u}}return{[Symbol.asyncIterator](){return this},async next(){if(i===-1){let l=s++;if(l>=t.length){let u=X();return r.push(u),await u.promise}return{done:!1,value:t[l]}}return s>i?{done:!0,value:void 0}:o()}}}}function Le(e){let t=[],r=-1,s=-1,i=e[Symbol.iterator]();for(;;)try{let a=i.next();if(t.push(a.value),a.done){s=t.length-1;break}}catch(a){r=t.length,t.push(a)}return{v:t,t:r,d:s}}function dr(e){return()=>{let t=0;return{[Symbol.iterator](){return this},next(){if(t>e.d)return{done:!0,value:void 0};let r=t++,s=e.v[r];if(r===e.t)throw s;return{done:r===e.d,value:s}}}}}var hr=class{constructor(e){this.marked=new Set,this.plugins=e.plugins,this.features=31^(e.disabledFeatures||0),this.refs=e.refs||new Map}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}getIndexedValue(e){let t=this.refs.get(e);if(t!=null)return this.markRef(t),{type:1,value:Vt(t)};let r=this.refs.size;return this.refs.set(e,r),{type:0,value:r}}getReference(e){let t=this.getIndexedValue(e);return t.type===1?t:W(e)?{type:2,value:ce(t.value,e)}:t}getStrictReference(e){v(W(e),new T(e));let t=this.getIndexedValue(e);return t.type===1?t.value:ce(t.value,e)}parseFunction(e){return this.getStrictReference(e)}parseWellKnownSymbol(e){let t=this.getReference(e);return t.type!==0?t.value:(v(e in Te,new T(e)),Mt(t.value,e))}parseSpecialReference(e){let t=this.getIndexedValue(or[e]);return t.type===1?t.value:{t:26,i:t.value,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}parseIteratorFactory(){let e=this.getIndexedValue(ar);return e.type===1?e.value:{t:27,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseWellKnownSymbol(Symbol.iterator),b:void 0,o:void 0}}parseAsyncIteratorFactory(){let e=this.getIndexedValue(nr);return e.type===1?e.value:{t:29,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],f:void 0,b:void 0,o:void 0}}createObjectNode(e,t,r,s){return{t:r?11:10,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:s,e:void 0,a:void 0,f:void 0,b:void 0,o:$e(t)}}createMapNode(e,t,r,s){return{t:8,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:{k:t,v:r,s},a:void 0,f:this.parseSpecialReference(0),b:void 0,o:void 0}}createPromiseConstructorNode(e){return{t:22,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseSpecialReference(1),b:void 0,o:void 0}}};function fr(e){switch(e){case"Int8Array":return Int8Array;case"Int16Array":return Int16Array;case"Int32Array":return Int32Array;case"Uint8Array":return Uint8Array;case"Uint16Array":return Uint16Array;case"Uint32Array":return Uint32Array;case"Uint8ClampedArray":return Uint8ClampedArray;case"Float32Array":return Float32Array;case"Float64Array":return Float64Array;case"BigInt64Array":return BigInt64Array;case"BigUint64Array":return BigUint64Array;default:throw new ir(e)}}function de(e,t){switch(t){case 3:return Object.freeze(e);case 1:return Object.preventExtensions(e);case 2:return Object.seal(e);default:return e}}var pr=class{constructor(e){this.plugins=e.plugins,this.refs=e.refs||new Map}deserializeReference(e){return this.assignIndexedValue(e.i,wt(m(e.s)))}deserializeArray(e){let t=e.l,r=this.assignIndexedValue(e.i,new Array(t)),s;for(let i=0;i<t;i++)s=e.a[i],s&&(r[i]=this.deserialize(s));return de(r,e.o),r}deserializeProperties(e,t){let r=e.s;if(r){let s=e.k,i=e.v;for(let a=0,n;a<r;a++)n=s[a],typeof n=="string"?t[m(n)]=this.deserialize(i[a]):t[this.deserialize(n)]=this.deserialize(i[a])}return t}deserializeObject(e){let t=this.assignIndexedValue(e.i,e.t===10?{}:Object.create(null));return this.deserializeProperties(e.p,t),de(t,e.o),t}deserializeDate(e){return this.assignIndexedValue(e.i,new Date(e.s))}deserializeRegExp(e){return this.assignIndexedValue(e.i,new RegExp(m(e.c),e.m))}deserializeSet(e){let t=this.assignIndexedValue(e.i,new Set),r=e.a;for(let s=0,i=e.l;s<i;s++)t.add(this.deserialize(r[s]));return t}deserializeMap(e){let t=this.assignIndexedValue(e.i,new Map),r=e.e.k,s=e.e.v;for(let i=0,a=e.e.s;i<a;i++)t.set(this.deserialize(r[i]),this.deserialize(s[i]));return t}deserializeArrayBuffer(e){let t=new Uint8Array(e.s);return this.assignIndexedValue(e.i,t.buffer)}deserializeTypedArray(e){let t=fr(e.c),r=this.deserialize(e.f);return this.assignIndexedValue(e.i,new t(r,e.b,e.l))}deserializeDataView(e){let t=this.deserialize(e.f);return this.assignIndexedValue(e.i,new DataView(t,e.b,e.l))}deserializeDictionary(e,t){if(e.p){let r=this.deserializeProperties(e.p,{});Object.assign(t,r)}return t}deserializeAggregateError(e){let t=this.assignIndexedValue(e.i,new AggregateError([],m(e.m)));return this.deserializeDictionary(e,t)}deserializeError(e){let t=xt[e.s],r=this.assignIndexedValue(e.i,new t(m(e.m)));return this.deserializeDictionary(e,r)}deserializePromise(e){let t=X(),r=this.assignIndexedValue(e.i,t),s=this.deserialize(e.f);return e.s?t.resolve(s):t.reject(s),r.promise}deserializeBoxed(e){return this.assignIndexedValue(e.i,Object(this.deserialize(e.f)))}deserializePlugin(e){let t=this.plugins;if(t){let r=m(e.c);for(let s=0,i=t.length;s<i;s++){let a=t[s];if(a.tag===r)return this.assignIndexedValue(e.i,a.deserialize(e.s,this,{id:e.i}))}}throw new Me(e.c)}deserializePromiseConstructor(e){return this.assignIndexedValue(e.i,X()).promise}deserializePromiseResolve(e){let t=this.refs.get(e.i);v(t,new w("Promise")),t.resolve(this.deserialize(e.a[1]))}deserializePromiseReject(e){let t=this.refs.get(e.i);v(t,new w("Promise")),t.reject(this.deserialize(e.a[1]))}deserializeIteratorFactoryInstance(e){this.deserialize(e.a[0]);let t=this.deserialize(e.a[1]);return dr(t)}deserializeAsyncIteratorFactoryInstance(e){this.deserialize(e.a[0]);let t=this.deserialize(e.a[1]);return cr(t)}deserializeStreamConstructor(e){let t=this.assignIndexedValue(e.i,P()),r=e.a.length;if(r)for(let s=0;s<r;s++)this.deserialize(e.a[s]);return t}deserializeStreamNext(e){let t=this.refs.get(e.i);v(t,new w("Stream")),t.next(this.deserialize(e.f))}deserializeStreamThrow(e){let t=this.refs.get(e.i);v(t,new w("Stream")),t.throw(this.deserialize(e.f))}deserializeStreamReturn(e){let t=this.refs.get(e.i);v(t,new w("Stream")),t.return(this.deserialize(e.f))}deserializeIteratorFactory(e){this.deserialize(e.f)}deserializeAsyncIteratorFactory(e){this.deserialize(e.a[1])}deserialize(e){try{switch(e.t){case 2:return It[e.s];case 0:return e.s;case 1:return m(e.s);case 3:return BigInt(e.s);case 4:return this.refs.get(e.i);case 18:return this.deserializeReference(e);case 9:return this.deserializeArray(e);case 10:case 11:return this.deserializeObject(e);case 5:return this.deserializeDate(e);case 6:return this.deserializeRegExp(e);case 7:return this.deserializeSet(e);case 8:return this.deserializeMap(e);case 19:return this.deserializeArrayBuffer(e);case 16:case 15:return this.deserializeTypedArray(e);case 20:return this.deserializeDataView(e);case 14:return this.deserializeAggregateError(e);case 13:return this.deserializeError(e);case 12:return this.deserializePromise(e);case 17:return Rt[e.s];case 21:return this.deserializeBoxed(e);case 25:return this.deserializePlugin(e);case 22:return this.deserializePromiseConstructor(e);case 23:return this.deserializePromiseResolve(e);case 24:return this.deserializePromiseReject(e);case 28:return this.deserializeIteratorFactoryInstance(e);case 30:return this.deserializeAsyncIteratorFactoryInstance(e);case 31:return this.deserializeStreamConstructor(e);case 32:return this.deserializeStreamNext(e);case 33:return this.deserializeStreamThrow(e);case 34:return this.deserializeStreamReturn(e);case 27:return this.deserializeIteratorFactory(e);case 29:return this.deserializeAsyncIteratorFactory(e);default:throw new _e(e)}}catch(t){throw new tr(t)}}},vr=class extends pr{constructor(t){super(t),this.mode="vanilla",this.marked=new Set(t.markedRefs)}assignIndexedValue(t,r){return this.marked.has(t)&&this.refs.set(t,r),r}},gr=/^[$A-Z_][0-9A-Z_$]*$/i;function he(e){let t=e[0];return(t==="$"||t==="_"||t>="A"&&t<="Z"||t>="a"&&t<="z")&&gr.test(e)}function R(e){switch(e.t){case 0:return e.s+"="+e.v;case 2:return e.s+".set("+e.k+","+e.v+")";case 1:return e.s+".add("+e.v+")";case 3:return e.s+".delete("+e.k+")"}}function mr(e){let t=[],r=e[0];for(let s=1,i=e.length,a,n=r;s<i;s++)a=e[s],a.t===0&&a.v===n.v?r={t:0,s:a.s,k:void 0,v:R(r)}:a.t===2&&a.s===n.s?r={t:2,s:R(r),k:a.k,v:a.v}:a.t===1&&a.s===n.s?r={t:1,s:R(r),k:void 0,v:a.v}:a.t===3&&a.s===n.s?r={t:3,s:R(r),k:a.k,v:void 0}:(t.push(r),r=a),n=a;return t.push(r),t}function fe(e){if(e.length){let t="",r=mr(e);for(let s=0,i=r.length;s<i;s++)t+=R(r[s])+",";return t}}var yr="Object.create(null)",br="new Set",zr="new Map",wr="Promise.resolve",Sr="Promise.reject",Rr={3:"Object.freeze",2:"Object.seal",1:"Object.preventExtensions",0:void 0},Ar=class{constructor(e){this.stack=[],this.flags=[],this.assignments=[],this.plugins=e.plugins,this.features=e.features,this.marked=new Set(e.markedRefs)}createFunction(e,t){return this.features&2?(e.length===1?e[0]:"("+e.join(",")+")")+"=>"+t:"function("+e.join(",")+"){return "+t+"}"}createEffectfulFunction(e,t){return this.features&2?(e.length===1?e[0]:"("+e.join(",")+")")+"=>{"+t+"}":"function("+e.join(",")+"){"+t+"}"}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}pushObjectFlag(e,t){e!==0&&(this.markRef(t),this.flags.push({type:e,value:this.getRefParam(t)}))}resolveFlags(){let e="";for(let t=0,r=this.flags,s=r.length;t<s;t++){let i=r[t];e+=Rr[i.type]+"("+i.value+"),"}return e}resolvePatches(){let e=fe(this.assignments),t=this.resolveFlags();return e?t?e+t:e:t}createAssignment(e,t){this.assignments.push({t:0,s:e,k:void 0,v:t})}createAddAssignment(e,t){this.assignments.push({t:1,s:this.getRefParam(e),k:void 0,v:t})}createSetAssignment(e,t,r){this.assignments.push({t:2,s:this.getRefParam(e),k:t,v:r})}createDeleteAssignment(e,t){this.assignments.push({t:3,s:this.getRefParam(e),k:t,v:void 0})}createArrayAssign(e,t,r){this.createAssignment(this.getRefParam(e)+"["+t+"]",r)}createObjectAssign(e,t,r){this.createAssignment(this.getRefParam(e)+"."+t,r)}isIndexedValueInStack(e){return e.t===4&&this.stack.includes(e.i)}serializeReference(e){return this.assignIndexedValue(e.i,S+'.get("'+e.s+'")')}serializeArrayItem(e,t,r){return t?this.isIndexedValueInStack(t)?(this.markRef(e),this.createArrayAssign(e,r,this.getRefParam(t.i)),""):this.serialize(t):""}serializeArray(e){let t=e.i;if(e.l){this.stack.push(t);let r=e.a,s=this.serializeArrayItem(t,r[0],0),i=s==="";for(let a=1,n=e.l,o;a<n;a++)o=this.serializeArrayItem(t,r[a],a),s+=","+o,i=o==="";return this.stack.pop(),this.pushObjectFlag(e.o,e.i),this.assignIndexedValue(t,"["+s+(i?",]":"]"))}return this.assignIndexedValue(t,"[]")}serializeProperty(e,t,r){if(typeof t=="string"){let s=Number(t),i=s>=0&&s.toString()===t||he(t);if(this.isIndexedValueInStack(r)){let a=this.getRefParam(r.i);return this.markRef(e.i),i&&s!==s?this.createObjectAssign(e.i,t,a):this.createArrayAssign(e.i,i?t:'"'+t+'"',a),""}return(i?t:'"'+t+'"')+":"+this.serialize(r)}return"["+this.serialize(t)+"]:"+this.serialize(r)}serializeProperties(e,t){let r=t.s;if(r){let s=t.k,i=t.v;this.stack.push(e.i);let a=this.serializeProperty(e,s[0],i[0]);for(let n=1,o=a;n<r;n++)o=this.serializeProperty(e,s[n],i[n]),a+=(o&&a&&",")+o;return this.stack.pop(),"{"+a+"}"}return"{}"}serializeObject(e){return this.pushObjectFlag(e.o,e.i),this.assignIndexedValue(e.i,this.serializeProperties(e,e.p))}serializeWithObjectAssign(e,t,r){let s=this.serializeProperties(e,t);return s!=="{}"?"Object.assign("+r+","+s+")":r}serializeStringKeyAssignment(e,t,r,s){let i=this.serialize(s),a=Number(r),n=a>=0&&a.toString()===r||he(r);if(this.isIndexedValueInStack(s))n&&a!==a?this.createObjectAssign(e.i,r,i):this.createArrayAssign(e.i,n?r:'"'+r+'"',i);else{let o=this.assignments;this.assignments=t,n&&a!==a?this.createObjectAssign(e.i,r,i):this.createArrayAssign(e.i,n?r:'"'+r+'"',i),this.assignments=o}}serializeAssignment(e,t,r,s){if(typeof r=="string")this.serializeStringKeyAssignment(e,t,r,s);else{let i=this.stack;this.stack=[];let a=this.serialize(s);this.stack=i;let n=this.assignments;this.assignments=t,this.createArrayAssign(e.i,this.serialize(r),a),this.assignments=n}}serializeAssignments(e,t){let r=t.s;if(r){let s=[],i=t.k,a=t.v;this.stack.push(e.i);for(let n=0;n<r;n++)this.serializeAssignment(e,s,i[n],a[n]);return this.stack.pop(),fe(s)}}serializeDictionary(e,t){if(e.p)if(this.features&8)t=this.serializeWithObjectAssign(e,e.p,t);else{this.markRef(e.i);let r=this.serializeAssignments(e,e.p);if(r)return"("+this.assignIndexedValue(e.i,t)+","+r+this.getRefParam(e.i)+")"}return this.assignIndexedValue(e.i,t)}serializeNullConstructor(e){return this.pushObjectFlag(e.o,e.i),this.serializeDictionary(e,yr)}serializeDate(e){return this.assignIndexedValue(e.i,'new Date("'+e.s+'")')}serializeRegExp(e){return this.assignIndexedValue(e.i,"/"+e.c+"/"+e.m)}serializeSetItem(e,t){return this.isIndexedValueInStack(t)?(this.markRef(e),this.createAddAssignment(e,this.getRefParam(t.i)),""):this.serialize(t)}serializeSet(e){let t=br,r=e.l,s=e.i;if(r){let i=e.a;this.stack.push(s);let a=this.serializeSetItem(s,i[0]);for(let n=1,o=a;n<r;n++)o=this.serializeSetItem(s,i[n]),a+=(o&&a&&",")+o;this.stack.pop(),a&&(t+="(["+a+"])")}return this.assignIndexedValue(s,t)}serializeMapEntry(e,t,r,s){if(this.isIndexedValueInStack(t)){let i=this.getRefParam(t.i);if(this.markRef(e),this.isIndexedValueInStack(r)){let n=this.getRefParam(r.i);return this.createSetAssignment(e,i,n),""}if(r.t!==4&&r.i!=null&&this.isMarked(r.i)){let n="("+this.serialize(r)+",["+s+","+s+"])";return this.createSetAssignment(e,i,this.getRefParam(r.i)),this.createDeleteAssignment(e,s),n}let a=this.stack;return this.stack=[],this.createSetAssignment(e,i,this.serialize(r)),this.stack=a,""}if(this.isIndexedValueInStack(r)){let i=this.getRefParam(r.i);if(this.markRef(e),t.t!==4&&t.i!=null&&this.isMarked(t.i)){let n="("+this.serialize(t)+",["+s+","+s+"])";return this.createSetAssignment(e,this.getRefParam(t.i),i),this.createDeleteAssignment(e,s),n}let a=this.stack;return this.stack=[],this.createSetAssignment(e,this.serialize(t),i),this.stack=a,""}return"["+this.serialize(t)+","+this.serialize(r)+"]"}serializeMap(e){let t=zr,r=e.e.s,s=e.i,i=e.f,a=this.getRefParam(i.i);if(r){let n=e.e.k,o=e.e.v;this.stack.push(s);let l=this.serializeMapEntry(s,n[0],o[0],a);for(let u=1,d=l;u<r;u++)d=this.serializeMapEntry(s,n[u],o[u],a),l+=(d&&l&&",")+d;this.stack.pop(),l&&(t+="(["+l+"])")}return i.t===26&&(this.markRef(i.i),t="("+this.serialize(i)+","+t+")"),this.assignIndexedValue(s,t)}serializeArrayBuffer(e){let t="new Uint8Array(",r=e.s,s=r.length;if(s){t+="["+r[0];for(let i=1;i<s;i++)t+=","+r[i];t+="]"}return this.assignIndexedValue(e.i,t+").buffer")}serializeTypedArray(e){return this.assignIndexedValue(e.i,"new "+e.c+"("+this.serialize(e.f)+","+e.b+","+e.l+")")}serializeDataView(e){return this.assignIndexedValue(e.i,"new DataView("+this.serialize(e.f)+","+e.b+","+e.l+")")}serializeAggregateError(e){let t=e.i;this.stack.push(t);let r=this.serializeDictionary(e,'new AggregateError([],"'+e.m+'")');return this.stack.pop(),r}serializeError(e){return this.serializeDictionary(e,"new "+Oe[e.s]+'("'+e.m+'")')}serializePromise(e){let t,r=e.f,s=e.i,i=e.s?wr:Sr;if(this.isIndexedValueInStack(r)){let a=this.getRefParam(r.i);t=i+(e.s?"().then("+this.createFunction([],a)+")":"().catch("+this.createEffectfulFunction([],"throw "+a)+")")}else{this.stack.push(s);let a=this.serialize(r);this.stack.pop(),t=i+"("+a+")"}return this.assignIndexedValue(s,t)}serializeWellKnownSymbol(e){return this.assignIndexedValue(e.i,St[e.s])}serializeBoxed(e){return this.assignIndexedValue(e.i,"Object("+this.serialize(e.f)+")")}serializePlugin(e){let t=this.plugins;if(t)for(let r=0,s=t.length;r<s;r++){let i=t[r];if(i.tag===e.c)return this.assignIndexedValue(e.i,i.serialize(e.s,this,{id:e.i}))}throw new Me(e.c)}getConstructor(e){let t=this.serialize(e);return t===this.getRefParam(e.i)?t:"("+t+")"}serializePromiseConstructor(e){return this.assignIndexedValue(e.i,this.getConstructor(e.f)+"()")}serializePromiseResolve(e){return this.getConstructor(e.a[0])+"("+this.getRefParam(e.i)+","+this.serialize(e.a[1])+")"}serializePromiseReject(e){return this.getConstructor(e.a[0])+"("+this.getRefParam(e.i)+","+this.serialize(e.a[1])+")"}serializeSpecialReferenceValue(e){switch(e){case 0:return"[]";case 1:return this.createFunction(["s","f","p"],"((p=new Promise("+this.createEffectfulFunction(["a","b"],"s=a,f=b")+")).s=s,p.f=f,p)");case 2:return this.createEffectfulFunction(["p","d"],'p.s(d),p.status="success",p.value=d;delete p.s;delete p.f');case 3:return this.createEffectfulFunction(["p","d"],'p.f(d),p.status="failure",p.value=d;delete p.s;delete p.f');case 4:return this.createFunction(["b","a","s","l","p","f","e","n"],"(b=[],a=!0,s=!1,l=[],p=0,f="+this.createEffectfulFunction(["v","m","x"],"for(x=0;x<p;x++)l[x]&&l[x][m](v)")+",n="+this.createEffectfulFunction(["o","x","z","c"],'for(x=0,z=b.length;x<z;x++)(c=b[x],(!a&&x===z-1)?o[s?"return":"throw"](c):o.next(c))')+",e="+this.createFunction(["o","t"],"(a&&(l[t=p++]=o),n(o),"+this.createEffectfulFunction([],"a&&(l[t]=void 0)")+")")+",{__SEROVAL_STREAM__:!0,on:"+this.createFunction(["o"],"e(o)")+",next:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"next"))')+",throw:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"throw"),a=s=!1,l.length=0)')+",return:"+this.createEffectfulFunction(["v"],'a&&(b.push(v),f(v,"return"),a=!1,s=!0,l.length=0)')+"})");default:return""}}serializeSpecialReference(e){return this.assignIndexedValue(e.i,this.serializeSpecialReferenceValue(e.s))}serializeIteratorFactory(e){let t="",r=!1;return e.f.t!==4&&(this.markRef(e.f.i),t="("+this.serialize(e.f)+",",r=!0),t+=this.assignIndexedValue(e.i,this.createFunction(["s"],this.createFunction(["i","c","d","t"],"(i=0,t={["+this.getRefParam(e.f.i)+"]:"+this.createFunction([],"t")+",next:"+this.createEffectfulFunction([],"if(i>s.d)return{done:!0,value:void 0};if(d=s.v[c=i++],c===s.t)throw d;return{done:c===s.d,value:d}")+"})"))),r&&(t+=")"),t}serializeIteratorFactoryInstance(e){return this.getConstructor(e.a[0])+"("+this.serialize(e.a[1])+")"}serializeAsyncIteratorFactory(e){let t=e.a[0],r=e.a[1],s="";t.t!==4&&(this.markRef(t.i),s+="("+this.serialize(t)),r.t!==4&&(this.markRef(r.i),s+=(s?",":"(")+this.serialize(r)),s&&(s+=",");let i=this.assignIndexedValue(e.i,this.createFunction(["s"],this.createFunction(["b","c","p","d","e","t","f"],"(b=[],c=0,p=[],d=-1,e=!1,f="+this.createEffectfulFunction(["i","l"],"for(i=0,l=p.length;i<l;i++)p[i].s({done:!0,value:void 0})")+",s.on({next:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.s({done:!1,value:v});b.push(v)")+",throw:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.f(v);f(),d=b.length,e=!0,b.push(v)")+",return:"+this.createEffectfulFunction(["v","t"],"if(t=p.shift())t.s({done:!0,value:v});f(),d=b.length,b.push(v)")+"}),t={["+this.getRefParam(r.i)+"]:"+this.createFunction([],"t")+",next:"+this.createEffectfulFunction(["i","t","v"],"if(d===-1){return((i=c++)>=b.length)?(p.push(t="+this.getRefParam(t.i)+"()),t):{done:!1,value:b[i]}}if(c>d)return{done:!0,value:void 0};if(v=b[i=c++],i!==d)return{done:!1,value:v};if(e)throw v;return{done:!0,value:v}")+"})")));return s?s+i+")":i}serializeAsyncIteratorFactoryInstance(e){return this.getConstructor(e.a[0])+"("+this.serialize(e.a[1])+")"}serializeStreamConstructor(e){let t=this.assignIndexedValue(e.i,this.getConstructor(e.f)+"()"),r=e.a.length;if(r){let s=this.serialize(e.a[0]);for(let i=1;i<r;i++)s+=","+this.serialize(e.a[i]);return"("+t+","+s+","+this.getRefParam(e.i)+")"}return t}serializeStreamNext(e){return this.getRefParam(e.i)+".next("+this.serialize(e.f)+")"}serializeStreamThrow(e){return this.getRefParam(e.i)+".throw("+this.serialize(e.f)+")"}serializeStreamReturn(e){return this.getRefParam(e.i)+".return("+this.serialize(e.f)+")"}serialize(e){try{switch(e.t){case 2:return At[e.s];case 0:return""+e.s;case 1:return'"'+e.s+'"';case 3:return e.s+"n";case 4:return this.getRefParam(e.i);case 18:return this.serializeReference(e);case 9:return this.serializeArray(e);case 10:return this.serializeObject(e);case 11:return this.serializeNullConstructor(e);case 5:return this.serializeDate(e);case 6:return this.serializeRegExp(e);case 7:return this.serializeSet(e);case 8:return this.serializeMap(e);case 19:return this.serializeArrayBuffer(e);case 16:case 15:return this.serializeTypedArray(e);case 20:return this.serializeDataView(e);case 14:return this.serializeAggregateError(e);case 13:return this.serializeError(e);case 12:return this.serializePromise(e);case 17:return this.serializeWellKnownSymbol(e);case 21:return this.serializeBoxed(e);case 22:return this.serializePromiseConstructor(e);case 23:return this.serializePromiseResolve(e);case 24:return this.serializePromiseReject(e);case 25:return this.serializePlugin(e);case 26:return this.serializeSpecialReference(e);case 27:return this.serializeIteratorFactory(e);case 28:return this.serializeIteratorFactoryInstance(e);case 29:return this.serializeAsyncIteratorFactory(e);case 30:return this.serializeAsyncIteratorFactoryInstance(e);case 31:return this.serializeStreamConstructor(e);case 32:return this.serializeStreamNext(e);case 33:return this.serializeStreamThrow(e);case 34:return this.serializeStreamReturn(e);default:throw new _e(e)}}catch(t){throw new er(t)}}},Ir=class extends hr{parseItems(t){let r=[];for(let s=0,i=t.length;s<i;s++)s in t&&(r[s]=this.parse(t[s]));return r}parseArray(t,r){return Lt(t,r,this.parseItems(r))}parseProperties(t){let r=Object.entries(t),s=[],i=[];for(let n=0,o=r.length;n<o;n++)s.push(p(r[n][0])),i.push(this.parse(r[n][1]));let a=Symbol.iterator;return a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(Ve(this.parseIteratorFactory(),this.parse(Le(t))))),a=Symbol.asyncIterator,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(Ne(this.parseAsyncIteratorFactory(),this.parse(P())))),a=Symbol.toStringTag,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(G(t[a]))),a=Symbol.isConcatSpreadable,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(t[a]?B:K)),{k:s,v:i,s:s.length}}parsePlainObject(t,r,s){return this.createObjectNode(t,r,s,this.parseProperties(r))}parseBoxed(t,r){return Ut(t,this.parse(r.valueOf()))}parseTypedArray(t,r){return qt(t,r,this.parse(r.buffer))}parseBigIntTypedArray(t,r){return Ht(t,r,this.parse(r.buffer))}parseDataView(t,r){return Wt(t,r,this.parse(r.buffer))}parseError(t,r){let s=ue(r,this.features);return Bt(t,r,s?this.parseProperties(s):void 0)}parseAggregateError(t,r){let s=ue(r,this.features);return Kt(t,r,s?this.parseProperties(s):void 0)}parseMap(t,r){let s=[],i=[];for(let[a,n]of r.entries())s.push(this.parse(a)),i.push(this.parse(n));return this.createMapNode(t,s,i,r.size)}parseSet(t,r){let s=[];for(let i of r.keys())s.push(this.parse(i));return Gt(t,r.size,s)}parsePlugin(t,r){let s=this.plugins;if(s)for(let i=0,a=s.length;i<a;i++){let n=s[i];if(n.parse.sync&&n.test(r))return je(t,n.tag,n.parse.sync(r,this,{id:t}))}}parseStream(t,r){return De(t,this.parseSpecialReference(4),[])}parsePromise(t,r){return this.createPromiseConstructorNode(t)}parseObject(t,r){if(Array.isArray(r))return this.parseArray(t,r);if(lr(r))return this.parseStream(t,r);let s=this.parsePlugin(t,r);if(s)return s;let i=r.constructor;switch(i){case Object:return this.parsePlainObject(t,r,!1);case void 0:return this.parsePlainObject(t,r,!0);case Date:return Nt(t,r);case RegExp:return Dt(t,r);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(t,r);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(t,r);case ArrayBuffer:return _t(t,r);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(t,r);case DataView:return this.parseDataView(t,r);case Map:return this.parseMap(t,r);case Set:return this.parseSet(t,r)}if(i===Promise||r instanceof Promise)return this.parsePromise(t,r);let a=this.features;if(a&16)switch(i){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(t,r)}if(a&1&&typeof AggregateError<"u"&&(i===AggregateError||r instanceof AggregateError))return this.parseAggregateError(t,r);if(r instanceof Error)return this.parseError(t,r);if(Symbol.iterator in r||Symbol.asyncIterator in r)return this.parsePlainObject(t,r,!!i);throw new T(r)}parse(t){try{switch(typeof t){case"boolean":return t?B:K;case"undefined":return Et;case"string":return G(t);case"number":return $t(t);case"bigint":return jt(t);case"object":{if(t){let r=this.getReference(t);return r.type===0?this.parseObject(r.value,t):r.value}return Pt}case"symbol":return this.parseWellKnownSymbol(t);case"function":return this.parseFunction(t);default:throw new T(t)}}catch(r){throw new Qt(r)}}};function pe(e,t={}){let r=Ce(t.plugins);return new vr({plugins:r,markedRefs:e.m}).deserialize(e.t)}var xr=class extends Ar{constructor(t){super(t),this.mode="cross",this.scopeId=t.scopeId}getRefParam(t){return C+"["+t+"]"}assignIndexedValue(t,r){return this.getRefParam(t)+"="+r}serializeTop(t){let r=this.serialize(t),s=t.i;if(s==null)return r;let i=this.resolvePatches(),a=this.getRefParam(s),n=this.scopeId==null?"":C,o=i?r+","+i+a:r;if(n==="")return i?"("+o+")":o;let l=this.scopeId==null?"()":"("+C+'["'+p(this.scopeId)+'"])';return"("+this.createFunction([n],o)+")"+l}},Er=class extends Ir{constructor(t){super(t),this.alive=!0,this.pending=0,this.initial=!0,this.buffer=[],this.onParseCallback=t.onParse,this.onErrorCallback=t.onError,this.onDoneCallback=t.onDone}onParseInternal(t,r){try{this.onParseCallback(t,r)}catch(s){this.onError(s)}}flush(){for(let t=0,r=this.buffer.length;t<r;t++)this.onParseInternal(this.buffer[t],!1)}onParse(t){this.initial?this.buffer.push(t):this.onParseInternal(t,!1)}onError(t){if(this.onErrorCallback)this.onErrorCallback(t);else throw t}onDone(){this.onDoneCallback&&this.onDoneCallback()}pushPendingState(){this.pending++}popPendingState(){--this.pending<=0&&this.onDone()}parseProperties(t){let r=Object.entries(t),s=[],i=[];for(let n=0,o=r.length;n<o;n++)s.push(p(r[n][0])),i.push(this.parse(r[n][1]));let a=Symbol.iterator;return a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(Ve(this.parseIteratorFactory(),this.parse(Le(t))))),a=Symbol.asyncIterator,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(Ne(this.parseAsyncIteratorFactory(),this.parse(ur(t))))),a=Symbol.toStringTag,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(G(t[a]))),a=Symbol.isConcatSpreadable,a in t&&(s.push(this.parseWellKnownSymbol(a)),i.push(t[a]?B:K)),{k:s,v:i,s:s.length}}parsePromise(t,r){return r.then(s=>{let i=this.parseWithError(s);i&&this.onParse({t:23,i:t,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(2),i],f:void 0,b:void 0,o:void 0}),this.popPendingState()},s=>{if(this.alive){let i=this.parseWithError(s);i&&this.onParse({t:24,i:t,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(3),i],f:void 0,b:void 0,o:void 0})}this.popPendingState()}),this.pushPendingState(),this.createPromiseConstructorNode(t)}parsePlugin(t,r){let s=this.plugins;if(s)for(let i=0,a=s.length;i<a;i++){let n=s[i];if(n.parse.stream&&n.test(r))return je(t,n.tag,n.parse.stream(r,this,{id:t}))}}parseStream(t,r){let s=De(t,this.parseSpecialReference(4),[]);return this.pushPendingState(),r.on({next:i=>{if(this.alive){let a=this.parseWithError(i);a&&this.onParse(Xt(t,a))}},throw:i=>{if(this.alive){let a=this.parseWithError(i);a&&this.onParse(Yt(t,a))}this.popPendingState()},return:i=>{if(this.alive){let a=this.parseWithError(i);a&&this.onParse(Zt(t,a))}this.popPendingState()}}),s}parseWithError(t){try{return this.parse(t)}catch(r){this.onError(r);return}}start(t){let r=this.parseWithError(t);r&&(this.onParseInternal(r,!0),this.initial=!1,this.flush(),this.pending<=0&&this.destroy())}destroy(){this.alive&&(this.onDone(),this.alive=!1)}isAlive(){return this.alive}},Pr=class extends Er{constructor(){super(...arguments),this.mode="cross"}};function kr(e,t){let r=Ce(t.plugins),s=new Pr({plugins:r,refs:t.refs,disabledFeatures:t.disabledFeatures,onParse(i,a){let n=new xr({plugins:r,features:s.features,scopeId:t.scopeId,markedRefs:s.marked}),o;try{o=n.serializeTop(i)}catch(l){t.onError&&t.onError(l);return}t.onSerialize(o,a)},onError:t.onError,onDone:t.onDone});return s.start(e),()=>{s.destroy()}}function V(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Fr={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(V(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(V(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(V(e))}}},serialize(e,t){return"new CustomEvent("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new CustomEvent(t.deserialize(e.type),t.deserialize(e.options))}},Y=Fr,Cr={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}},async async(e,t){return{name:await t.parse(e.name),message:await t.parse(e.message)}},stream(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}}},serialize(e,t){return"new DOMException("+t.serialize(e.message)+","+t.serialize(e.name)+")"},deserialize(e,t){return new DOMException(t.deserialize(e.message),t.deserialize(e.name))}},Z=Cr;function N(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Tr={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(N(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(N(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(N(e))}}},serialize(e,t){return"new Event("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Event(t.deserialize(e.type),t.deserialize(e.options))}},J=Tr,Or={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,t){return{name:await t.parse(e.name),options:await t.parse({type:e.type,lastModified:e.lastModified}),buffer:await t.parse(await e.arrayBuffer())}}},serialize(e,t){return"new File(["+t.serialize(e.buffer)+"],"+t.serialize(e.name)+","+t.serialize(e.options)+")"},deserialize(e,t){return new File([t.deserialize(e.buffer)],t.deserialize(e.name),t.deserialize(e.options))}},$r=Or;function D(e){let t=[];return e.forEach((r,s)=>{t.push([s,r])}),t}var A={},jr={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===A},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return A}},Vr={tag:"seroval-plugins/web/FormData",extends:[$r,jr],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,t){return{factory:t.parse(A),entries:t.parse(D(e))}},async async(e,t){return{factory:await t.parse(A),entries:await t.parse(D(e))}},stream(e,t){return{factory:t.parse(A),entries:t.parse(D(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.entries)+")"},deserialize(e,t){let r=new FormData,s=t.deserialize(e.entries);for(let i=0,a=s.length;i<a;i++){let n=s[i];r.append(n[0],n[1])}return r}},Q=Vr;function _(e){let t=[];return e.forEach((r,s)=>{t.push([s,r])}),t}var Nr={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,t){return t.parse(_(e))},async async(e,t){return await t.parse(_(e))},stream(e,t){return t.parse(_(e))}},serialize(e,t){return"new Headers("+t.serialize(e)+")"},deserialize(e,t){return new Headers(t.deserialize(e))}},x=Nr,I={},Dr={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===I},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createFunction(["d"],"new ReadableStream({start:"+t.createEffectfulFunction(["c"],"d.on({next:"+t.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+t.createEffectfulFunction(["v"],"c.error(v)")+",return:"+t.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return I}};function ve(e){let t=P(),r=e.getReader();async function s(){try{let i=await r.read();i.done?t.return(i.value):(t.next(i.value),await s())}catch(i){t.throw(i)}}return s().catch(()=>{}),t}var _r={tag:"seroval/plugins/web/ReadableStream",extends:[Dr],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,t){return{factory:t.parse(I),stream:t.parse(P())}},async async(e,t){return{factory:await t.parse(I),stream:await t.parse(ve(e))}},stream(e,t){return{factory:t.parse(I),stream:t.parse(ve(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.stream)+")"},deserialize(e,t){let r=t.deserialize(e.stream);return new ReadableStream({start(s){r.on({next(i){s.enqueue(i)},throw(i){s.error(i)},return(){s.close()}})}})}},E=_r;function ge(e,t){return{body:t,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Mr={tag:"seroval-plugins/web/Request",extends:[E,x],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,t){return{url:await t.parse(e.url),options:await t.parse(ge(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,t){return{url:t.parse(e.url),options:t.parse(ge(e,e.clone().body))}}},serialize(e,t){return"new Request("+t.serialize(e.url)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Request(t.deserialize(e.url),t.deserialize(e.options))}},ee=Mr;function me(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var Lr={tag:"seroval-plugins/web/Response",extends:[E,x],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,t){return{body:await t.parse(e.body?await e.clone().arrayBuffer():null),options:await t.parse(me(e))}},stream(e,t){return{body:t.parse(e.clone().body),options:t.parse(me(e))}}},serialize(e,t){return"new Response("+t.serialize(e.body)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Response(t.deserialize(e.body),t.deserialize(e.options))}},te=Lr,Ur={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,t){return t.parse(e.toString())},async async(e,t){return await t.parse(e.toString())},stream(e,t){return t.parse(e.toString())}},serialize(e,t){return"new URLSearchParams("+t.serialize(e)+")"},deserialize(e,t){return new URLSearchParams(t.deserialize(e))}},re=Ur,qr={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,t){return t.parse(e.href)},async async(e,t){return await t.parse(e.href)},stream(e,t){return t.parse(e.href)}},serialize(e,t){return"new URL("+t.serialize(e)+")"},deserialize(e,t){return new URL(t.deserialize(e))}},se=qr;function Hr(e={}){let t,r=!1;const s=n=>{if(t&&t!==n)throw new Error("Context conflict")};let i;if(e.asyncContext){const n=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;n?i=new n:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const a=()=>{if(i&&t===void 0){const n=i.getStore();if(n!==void 0)return n}return t};return{use:()=>{const n=a();if(n===void 0)throw new Error("Context is not available");return n},tryUse:()=>a(),set:(n,o)=>{o||s(n),t=n,r=!0},unset:()=>{t=void 0,r=!1},call:(n,o)=>{s(n),t=n;try{return i?i.run(n,o):o()}finally{r||(t=void 0)}},async callAsync(n,o){t=n;const l=()=>{t=n},u=()=>t===n?l:void 0;ze.add(u);try{const d=i?i.run(n,o):o();return r||(t=void 0),await d}finally{ze.delete(u)}}}}function Wr(e={}){const t={};return{get(r,s={}){return t[r]||(t[r]=Hr({...e,...s})),t[r],t[r]}}}const O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},ye="__unctx__",Br=O[ye]||(O[ye]=Wr()),Kr=(e,t={})=>Br.get(e,t),be="__unctx_async_handlers__",ze=O[be]||(O[be]=new Set);function Gr(e){let t;const r=qe(e),s={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(r,{...s,body:e.node.req.body}):new Request(r,{...s,get body(){return t||(t=ss(e),t)}})}function Xr(e){return e.web??={request:Gr(e),url:qe(e)},e.web.request}function Yr(){return os()}const Ue=Symbol("$HTTPEvent");function Zr(e){return typeof e=="object"&&(e instanceof H||e?.[Ue]instanceof H||e?.__is_event__===!0)}function h(e){return function(...t){let r=t[0];if(Zr(r))t[0]=r instanceof H||r.__is_event__?r:r[Ue];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(r=Yr(),!r)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(r)}return e(...t)}}const qe=h(ot),Jr=h(rt),$=h(Qe),we=h(st),Qr=h(it),F=h(lt),Se=h(ut),es=h(ct),He=h(et),ts=h(at),rs=h(nt),M=h(tt),ss=h(ht),is=h(dt),as=h(Xr);function ns(){return Kr("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:pt})}function os(){return ns().use().event}const L="Invariant Violation",{setPrototypeOf:ls=function(e,t){return e.__proto__=t,e}}=Object;class oe extends Error{framesToPop=1;name=L;constructor(t=L){super(typeof t=="number"?`${L}: ${t} (see https://github.com/apollographql/invariant-packages)`:t),ls(this,oe.prototype)}}function us(e,t){if(!e)throw new oe(t)}const U=Symbol("fetchEvent");function cs(e){return{request:as(e),response:ps(e),clientAddress:Jr(e),locals:{},nativeEvent:e}}function ds(e){return{...e}}function hs(e){if(!e[U]){const t=cs(e);e[U]=t}return e[U]}function Re(e,t){for(const[r,s]of t.entries())He(e,r,s)}class fs{event;constructor(t){this.event=t}get(t){const r=Se(this.event,t);return Array.isArray(r)?r.join(", "):r||null}has(t){return this.get(t)!==void 0}set(t,r){return es(this.event,t,r)}delete(t){return is(this.event,t)}append(t,r){He(this.event,t,r)}getSetCookie(){const t=Se(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(F(this.event)).forEach(([r,s])=>t(Array.isArray(s)?s.join(", "):s,r,this))}entries(){return Object.entries(F(this.event)).map(([t,r])=>[t,Array.isArray(r)?r.join(", "):r])[Symbol.iterator]()}keys(){return Object.keys(F(this.event))[Symbol.iterator]()}values(){return Object.values(F(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function ps(e){return{get status(){return we(e)},set status(t){$(e,t)},get statusText(){return Qr(e)},set statusText(t){$(e,we(),t)},headers:new fs(e)}}function vs(e){e.forEach(t=>{if(!t.attrs.href)return;let r=document.head.querySelector(`link[href="${t.attrs.href}"]`);r||(r=document.createElement("link"),r.setAttribute("rel","preload"),r.setAttribute("as","style"),r.setAttribute("href",t.attrs.href),document.head.appendChild(r))})}var gs=" ";const ms={style:e=>j("style",e.attrs,()=>Xe(e.children),!0),link:e=>j("link",e.attrs,void 0,!0),script:e=>e.attrs.src?j("script",Ye(()=>e.attrs,{get id(){return e.key}}),()=>Ze(gs),!0):null};function ys(e,t){let{tag:r,attrs:{key:s,...i}={key:void 0},children:a}=e;return ms[r]({attrs:{...i,nonce:t},key:s,children:a})}function bs(e,t,r,s="default"){return Ke(async()=>{{const a=(await e.import())[s],o=(await t.inputs?.[e.src].assets()).filter(u=>u.tag==="style"||u.attrs.rel==="stylesheet");return typeof window<"u"&&vs(o),{default:u=>[...o.map(d=>ys(d)),Ge(a,u)]}}})}const z={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function zs(e={}){const t={options:e,rootNode:We(),staticRoutesMap:{}},r=s=>e.strictTrailingSlash?s:s.replace(/\/$/,"")||"/";if(e.routes)for(const s in e.routes)Ae(t,r(s),e.routes[s]);return{ctx:t,lookup:s=>ws(t,r(s)),insert:(s,i)=>Ae(t,r(s),i),remove:s=>Ss(t,r(s))}}function ws(e,t){const r=e.staticRoutesMap[t];if(r)return r.data;const s=t.split("/"),i={};let a=!1,n=null,o=e.rootNode,l=null;for(let u=0;u<s.length;u++){const d=s[u];o.wildcardChildNode!==null&&(n=o.wildcardChildNode,l=s.slice(u).join("/"));const c=o.children.get(d);if(c===void 0){if(o&&o.placeholderChildren.length>1){const f=s.length-u;o=o.placeholderChildren.find(y=>y.maxDepth===f)||null}else o=o.placeholderChildren[0]||null;if(!o)break;o.paramName&&(i[o.paramName]=d),a=!0}else o=c}return(o===null||o.data===null)&&n!==null&&(o=n,i[o.paramName||"_"]=l,a=!0),o?a?{...o.data,params:a?i:void 0}:o.data:null}function Ae(e,t,r){let s=!0;const i=t.split("/");let a=e.rootNode,n=0;const o=[a];for(const l of i){let u;if(u=a.children.get(l))a=u;else{const d=Rs(l);u=We({type:d,parent:a}),a.children.set(l,u),d===z.PLACEHOLDER?(u.paramName=l==="*"?`_${n++}`:l.slice(1),a.placeholderChildren.push(u),s=!1):d===z.WILDCARD&&(a.wildcardChildNode=u,u.paramName=l.slice(3)||"_",s=!1),o.push(u),a=u}}for(const[l,u]of o.entries())u.maxDepth=Math.max(o.length-l,u.maxDepth||0);return a.data=r,s===!0&&(e.staticRoutesMap[t]=a),a}function Ss(e,t){let r=!1;const s=t.split("/");let i=e.rootNode;for(const a of s)if(i=i.children.get(a),!i)return r;if(i.data){const a=s.at(-1)||"";i.data=null,Object.keys(i.children).length===0&&i.parent&&(i.parent.children.delete(a),i.parent.wildcardChildNode=null,i.parent.placeholderChildren=[]),r=!0}return r}function We(e={}){return{type:e.type||z.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function Rs(e){return e.startsWith("**")?z.WILDCARD:e[0]===":"||e==="*"?z.PLACEHOLDER:z.NORMAL}const Be=[],As=Is(Be.filter(e=>e.page));function Is(e){function t(r,s,i,a){const n=Object.values(r).find(o=>i.startsWith(o.id+"/"));return n?(t(n.children||(n.children=[]),s,i.slice(n.id.length)),r):(r.push({...s,id:i,path:i.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"")}),r)}return e.sort((r,s)=>r.path.length-s.path.length).reduce((r,s)=>t(r,s,s.path,s.path),[])}function xs(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}zs({routes:Be.reduce((e,t)=>{if(!xs(t))return e;let r=t.path.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"").replace(/\*([^/]*)/g,(s,i)=>`**:${i}`);if(/:[^/]*\?/g.test(r))throw new Error(`Optional parameters are not supported in API routes: ${r}`);if(e[r])throw new Error(`Duplicate API routes for "${r}" found at "${e[r].route.path}" and "${t.path}"`);return e[r]={route:t},e},{})});function Es(){function e(r){return{...r,...r.$$route?r.$$route.require().route:void 0,info:{...r.$$route?r.$$route.require().route.info:{},filesystem:!0},component:r.$component&&bs(r.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:r.children?r.children.map(e):void 0}}return As.map(e)}function Ps(e){const t=ts(e.nativeEvent,"flash");if(!t)return;let r=JSON.parse(t);if(!r||!r.result)return;const s=[...r.input.slice(0,-1),new Map(r.input[r.input.length-1])];return rs(e.nativeEvent,"flash","",{maxAge:0}),{input:s,url:r.url,pending:!1,result:r.error?new Error(r.result):r.result}}async function ks(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:Ps(e)},routes:Es(),complete:!1,$islands:new Set})}const Fs=new Set([301,302,303,307,308]);function Cs(e){return e.status&&Fs.has(e.status)?e.status:302}function Ts(e){const t=new TextEncoder().encode(e),r=t.length,s=r.toString(16),i="00000000".substring(0,8-s.length)+s,a=new TextEncoder().encode(`;0x${i};`),n=new Uint8Array(12+r);return n.set(a),n.set(t,12),n}function Ie(e,t){return new ReadableStream({start(r){kr(t,{scopeId:e,plugins:[Y,Z,J,Q,x,E,ee,te,re,se],onSerialize(s,i){r.enqueue(Ts(i?`(${yt(e)},${s})`:s))},onDone(){r.close()},onError(s){r.error(s)}})}})}async function Os(e){const t=hs(e),r=t.request,s=r.headers.get("X-Server-Id"),i=r.headers.get("X-Server-Instance"),a=r.headers.has("X-Single-Flight"),n=new URL(r.url);let o,l;if(s)us(typeof s=="string","Invalid server function"),[o,l]=s.split("#");else if(o=n.searchParams.get("id"),l=n.searchParams.get("name"),!o||!l)throw new Error("Invalid request");const u=(await globalThis.MANIFEST["server-fns"].chunks[o].import())[l];let d=[];if(!i||e.method==="GET"){const c=n.searchParams.get("args");if(c){const f=JSON.parse(c);(f.t?pe(f,{plugins:[Y,Z,J,Q,x,E,ee,te,re,se]}):f).forEach(y=>d.push(y))}}if(e.method==="POST"){const c=r.headers.get("content-type");if(c?.startsWith("multipart/form-data")||c?.startsWith("application/x-www-form-urlencoded"))d.push(await new Request(r,{...r,body:e.node.req.body}).formData());else if(c?.startsWith("application/json")){const f=new Request(r,{...r,body:e.node.req.body});d=pe(await f.json(),{plugins:[Y,Z,J,Q,x,E,ee,te,re,se]})}}try{let c=await Pe(t,async()=>(Ee.context={event:t},t.locals.serverFunctionMeta={id:o+"#"+l},u(...d)));if(a&&i&&(c=await xe(t,c)),c instanceof Response&&i&&(c.headers&&Re(e,c.headers),c.status&&(c.status<300||c.status>=400)&&$(e,c.status),c.customBody?c=await c.customBody():c.body==null&&(c=null)),!i){const f=c instanceof Error;let y=new URL(r.headers.get("referer")).toString(),le=302;return c instanceof Response&&c.headers.has("Location")&&(y=new URL(c.headers.get("Location"),new URL(r.url).origin+"").toString(),le=Cs(c)),new Response(null,{status:le,headers:{Location:y,...c?{"Set-Cookie":`flash=${JSON.stringify({url:n.pathname+encodeURIComponent(n.search),result:f?c.message:c,error:f,input:[...d.slice(0,-1),[...d[d.length-1].entries()]]})}; Secure; HttpOnly;`}:{}}})}return M(e,"content-type","text/javascript"),Ie(i,c)}catch(c){if(c instanceof Response)a&&i&&(c=await xe(t,c)),c.headers&&Re(e,c.headers),c.status&&(!i||c.status<300||c.status>=400)&&$(e,c.status),c.customBody?c=c.customBody():c.body==null&&(c=null);else{const f=c instanceof Error?c.message:typeof c=="string"?c:"true";M(e,"X-Error",f)}return i?(M(e,"content-type","text/javascript"),Ie(i,c)):c}}let q;async function xe(e,t){let r,s=new URL(e.request.headers.get("referer")).toString();t instanceof Response&&(t.headers.has("X-Revalidate")&&(r=t.headers.get("X-Revalidate").split(",")),t.headers.has("Location")&&(s=new URL(t.headers.get("Location"),new URL(e.request.url).origin+"").toString()));const i=ds(e);return i.request=new Request(s),await Pe(i,async()=>{await ks(i),q||(q=(await import("./app.mjs")).default),i.router.dataOnly=r||!0,i.router.previousUrl=e.request.headers.get("referer");try{Je(()=>{Ee.context.event=i,q()})}catch(o){console.log(o)}const a=i.router.data;if(!a)return t;let n=!1;for(const o in a)a[o]===void 0?delete a[o]:n=!0;return n&&(t instanceof Response?t.customBody&&(a._$value=t.customBody()):(a._$value=t,t=new Response(null,{status:200})),t.customBody=()=>a,t.headers.set("X-Single-Flight","true")),t})}const Xs=ft(Os);export{Xs as default};
