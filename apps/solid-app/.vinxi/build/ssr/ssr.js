import{ssr as u,ssrHydrationKey as b,ssrAttribute as x,escape as C,ssrElement as A,isServer as te,getRequestEvent as ne,createComponent as g,mergeProps as me,useAssets as ge,NoHydration as re,HydrationScript as ye,Hydration as Se,renderToString as ve,renderToStream as Ce}from"solid-js/web";import{createSignal as we,onCleanup as be,ErrorBoundary as $e,catchError as Ee,lazy as Re,createComponent as Te,sharedConfig as _}from"solid-js";import{provideRequestEvent as xe}from"solid-js/web/storage";import{H3Event as L,setResponseStatus as Ae,sendRedirect as He,setHeader as Ne,getRequestIP as Pe,getResponseStatus as Ie,getResponseStatusText as _e,getCookie as qe,setCookie as ke,getRequestURL as Fe,getResponseHeaders as Le,getResponseHeader as Oe,setResponseHeader as Me,appendResponseHeader as De,removeResponseHeader as je,getRequestWebStream as We,eventHandler as Ue}from"h3";import{AsyncLocalStorage as ze}from"node:async_hooks";/**
  * @collapsed/core v4.0.1
  *
  * Copyright (c) 2019-2024, Rogin Farrer
  *
  * This source code is licensed under the MIT license found in the
  * LICENSE.md file in the root directory of this source tree.
  *
  * @license MIT
  */function Be(e){if(!e||typeof e=="string")return 0;let t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Je(e,t){let n=performance.now(),r={};function o(){r.id=requestAnimationFrame(i=>{i-n>t?e():o()})}return o(),r}function q(e){e.id&&cancelAnimationFrame(e.id)}var k=new Map;function Ke(e){return k.has(e)||k.set(e,Be(e)),k.get(e)}var Ge=class{#e;frameId;endFrameId;constructor(e){this.#e={easing:"cubic-bezier(0.4, 0, 0.2, 1)",duration:"auto",collapsedHeight:0,onExpandedChange(){},onTransitionStateChange(){},...e}}setOptions(e){this.#e={...this.#e,...e}}#t(){return this.#e.getDisclosureElement()}#n(e){return this.#e.duration==="auto"?Ke(e):this.#e.duration}#r=e=>{let t=()=>{let n=this.#t();n.style.removeProperty("transition"),n.style.height===`${this.#e.collapsedHeight}px`?(this.setCollapsedStyles(),this.frameId=requestAnimationFrame(()=>{this.#e.onTransitionStateChange("collapseEnd")})):(n.style.removeProperty("height"),n.style.removeProperty("overflow"),n.style.removeProperty("display"),this.frameId=requestAnimationFrame(()=>{this.#e.onTransitionStateChange("expandEnd")}))};this.endFrameId&&q(this.endFrameId),this.endFrameId=Je(t,e)};getCollapsedStyles(){return{height:`${this.#e.collapsedHeight}px`,overflow:"hidden",display:this.#e.collapsedHeight===0?"none":"block"}}setCollapsedStyles(){let e=this.#t();for(let[t,n]of Object.entries(this.getCollapsedStyles()))e.style.setProperty(t,n)}unsetCollapsedStyles(){let e=this.#t();for(let t of Object.keys(this.getCollapsedStyles()))e.style.removeProperty(t)}open(){let e=this.#t();if(this.#e.onExpandedChange(!0),this.frameId&&cancelAnimationFrame(this.frameId),this.endFrameId&&q(this.endFrameId),z()){e.style.removeProperty("display"),e.style.removeProperty("height"),e.style.removeProperty("overflow");return}this.frameId=requestAnimationFrame(()=>{this.#e.onTransitionStateChange("expandStart"),e.style.setProperty("display","block"),e.style.setProperty("overflow","hidden"),e.style.setProperty("height",`${this.#e.collapsedHeight}px`),this.frameId=requestAnimationFrame(()=>{this.#e.onTransitionStateChange("expanding");let t=e.scrollHeight,n=this.#n(t);this.#r(n),e.style.transition=`height ${n}ms ${this.#e.easing}`,e.style.height=`${t}px`})})}close(){if(this.#e.onExpandedChange(!1),this.frameId&&cancelAnimationFrame(this.frameId),this.endFrameId&&q(this.endFrameId),z()){this.setCollapsedStyles();return}this.#e.onTransitionStateChange("collapseStart"),this.frameId=requestAnimationFrame(()=>{let e=this.#t(),t=e.scrollHeight,n=this.#n(t);this.#r(n),e.style.transition=`height ${n}ms ${this.#e.easing}`,e.style.height=`${t}px`,this.frameId=requestAnimationFrame(()=>{this.#e.onTransitionStateChange("collapsing"),e.style.overflow="hidden",e.style.height=`${this.#e.collapsedHeight}px`})})}};function z(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}/**
  * @collapsed/solid v0.0.0
  *
  * Copyright (c) 2019-2024, Rogin Farrer
  *
  * This source code is licensed under the MIT license found in the
  * LICENSE.md file in the root directory of this source tree.
  *
  * @license MIT
  */var Ye=Symbol("error");function Qe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function se(e,t=S){let n=t&&t.context&&t.context[Ye],r=Qe(e);if(!n)throw r;try{for(let o of n)o(r)}catch(o){se(o,t&&t.owner||null)}}var S=null;function Ve(){let e={owner:S,context:S?S.context:null,owned:null,cleanups:null};return S&&(S.owned?S.owned.push(e):S.owned=[e]),e}function T(e,t){return[()=>e,n=>e=typeof n=="function"?n(e):n]}function Xe(e,t){S=Ve();try{e(t)}catch(n){se(n)}finally{S=S.owner}}function Ze(e,t,n={}){let r=Array.isArray(e),o=n.defer;return()=>{if(o)return;let i;if(r){i=[];for(let s=0;s<e.length;s++)i.push(e[s]())}else i=e();return t(i)}}var et={};function tt(){let e=et.context;if(!e)throw new Error("createUniqueId cannot be used under non-hydrating context");return`${e.id}${e.count++}`}function $(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="function"&&(r=r()),r){let o=Object.getOwnPropertyDescriptors(r);for(let i in o)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let s=e.length-1;s>=0;s--){let a,c=e[s];if(typeof c=="function"&&(c=c()),a=(c||{})[i],a!==void 0)return a}}})}}return t}function nt(e){let t=tt(),[n,r]=T(!1),[o,i]=T(!1),[s,a]=T(),[c,l]=T(),p=$({getDisclosureElement:()=>s(),onExpandedChange(y){r(y),e.onExpandedChange?.(y)},onTransitionStateChange(y){switch(y){case"collapseEnd":case"expandEnd":i(!1);break}e.onTransitionStateChange?.(y)}},e),v=new Ge(p),[h,f]=T(v.getCollapsedStyles());Ze(n,y=>{i(!0),y?v.open():v.close()},{defer:!0}),Xe(()=>{v.setOptions(p),f(v.getCollapsedStyles())});let R=`collapsed-disclosure-${t}`,de=y=>{let w=$({disabled:!1},y),j=c?c()?.tagName==="BUTTON":void 0,H=he=>{w?.disabled||(rt(he,w.onClick),r(fe=>!fe))},I={"aria-controls":R,"aria-expanded":n(),ref:l,onClick:H},W={type:"button",disabled:w?.disabled?!0:void 0},U={"aria-disabled":w?.disabled?!0:void 0,role:"button",tabIndex:w?.disabled?-1:0};return j===!1?$(I,U,w,{onClick:H}):j===!0?$(I,W,w,{onClick:H}):$(I,U,W,w,{onClick:H})};function pe(y){return $({id:R},y,{ref:a,style:{boxSizing:"border-box",...!o()&&!n()?h():{}}})}return{get isExpanded(){return n()},setExpanded:r,getToggleProps:de,getCollapseProps:pe}}function rt(e,t){t&&(typeof t=="function"?t(e):t[0](t[1],e))}var m="<p>Hello there</p>",st=["<main",'><h1>Hello world!</h1><input type="number"',">","","</main>"];function ot(){const[e,t]=we(60),n=nt({get collapsedHeight(){return Number.isNaN(e())?0:e()}});return u(st,b(),x("value",C(e(),!0),!1),A("button",n.getToggleProps(),()=>"Toggle",!1),A("div",n.getCollapseProps(),()=>[u(m),u(m),u(m),u(m),u(m),u(m),u(m),u(m),u(m),u(m),u(m),u(m)],!1))}const oe=te?e=>{const t=ne();return t.response.status=e.code,t.response.statusText=e.text,be(()=>!t.nativeEvent.handled&&!t.complete&&(t.response.status=200)),null}:e=>null;var at=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">',"</span>"],it=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">500 | Internal Server Error</span>'];const lt=e=>{const t=te?"500 | Internal Server Error":"Error | Uncaught Client Exception";return g($e,{fallback:n=>(console.error(n),[u(at,b(),C(t)),g(oe,{code:500})]),get children(){return e.children}})},ct=e=>{let t=!1;const n=Ee(()=>e.children,r=>{console.error(r),t=!!r});return t?[u(it,b()),g(oe,{code:500})]:n};var ut=" ";const dt={style:e=>A("style",e.attrs,()=>C(e.children),!0),link:e=>A("link",e.attrs,void 0,!0),script:e=>e.attrs.src?A("script",me(()=>e.attrs,{get id(){return e.key}}),()=>u(ut),!0):null};function O(e,t){let{tag:n,attrs:{key:r,...o}={key:void 0},children:i}=e;return dt[n]({attrs:{...o,nonce:t},key:r,children:i})}var B=["<script",">","<\/script>"],pt=["<script",' type="module"'," async","><\/script>"],ht=["<script",' type="module" async',"><\/script>"];const ft=u("<!DOCTYPE html>");function ae(e,t,n=[]){for(let r=0;r<t.length;r++){const o=t[r];if(o.path!==e[0].path)continue;let i=[...n,o];if(o.children){const s=e.slice(1);if(s.length===0||(i=ae(s,o.children,i),!i))continue}return i}}function mt(e){const t=ne(),n=t.nonce;let r=[];return Promise.resolve().then(async()=>{let o=[];if(t.router&&t.router.matches){const i=[...t.router.matches];for(;i.length&&(!i[0].info||!i[0].info.filesystem);)i.shift();const s=i.length&&ae(i,t.routes);if(s)for(let a=0;a<s.length;a++){const c=s[a],l=globalThis.MANIFEST.client.inputs[c.$component.src];o.push(l.assets())}}r=await Promise.all(o).then(i=>[...new Map(i.flat().map(s=>[s.attrs.key,s])).values()].filter(s=>s.attrs.rel==="modulepreload"&&!t.assets.find(a=>a.attrs.key===s.attrs.key)))}),ge(()=>r.length?r.map(o=>O(o)):void 0),g(re,{get children(){return[ft,g(ct,{get children(){return g(e.document,{get assets(){return[g(ye,{}),t.assets.map(o=>O(o,n))]},get scripts(){return n?[u(B,b()+x("nonce",C(n,!0),!1),`window.manifest = ${JSON.stringify(t.manifest)}`),u(pt,b(),x("nonce",C(n,!0),!1),x("src",C(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]:[u(B,b(),`window.manifest = ${JSON.stringify(t.manifest)}`),u(ht,b(),x("src",C(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return g(Se,{get children(){return g(lt,{get children(){return g(ot,{})}})}})}})}})]}})}function gt(e={}){let t,n=!1;const r=s=>{if(t&&t!==s)throw new Error("Context conflict")};let o;if(e.asyncContext){const s=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;s?o=new s:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(o&&t===void 0){const s=o.getStore();if(s!==void 0)return s}return t};return{use:()=>{const s=i();if(s===void 0)throw new Error("Context is not available");return s},tryUse:()=>i(),set:(s,a)=>{a||r(s),t=s,n=!0},unset:()=>{t=void 0,n=!1},call:(s,a)=>{r(s),t=s;try{return o?o.run(s,a):a()}finally{n||(t=void 0)}},async callAsync(s,a){t=s;const c=()=>{t=s},l=()=>t===s?c:void 0;G.add(l);try{const p=o?o.run(s,a):a();return n||(t=void 0),await p}finally{G.delete(l)}}}}function yt(e={}){const t={};return{get(n,r={}){return t[n]||(t[n]=gt({...e,...r})),t[n],t[n]}}}const P=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},J="__unctx__",St=P[J]||(P[J]=yt()),vt=(e,t={})=>St.get(e,t),K="__unctx_async_handlers__",G=P[K]||(P[K]=new Set);function Ct(e){let t;const n=le(e),r={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(n,{...r,body:e.node.req.body}):new Request(n,{...r,get body(){return t||(t=Pt(e),t)}})}function wt(e){return e.web??={request:Ct(e),url:le(e)},e.web.request}function bt(){return kt()}const ie=Symbol("$HTTPEvent");function $t(e){return typeof e=="object"&&(e instanceof L||e?.[ie]instanceof L||e?.__is_event__===!0)}function d(e){return function(...t){let n=t[0];if($t(n))t[0]=n instanceof L||n.__is_event__?n:n[ie];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(n=bt(),!n)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(n)}return e(...t)}}const le=d(Fe),Et=d(Pe),M=d(Ae),Y=d(Ie),Rt=d(_e),N=d(Le),Q=d(Oe),Tt=d(Me),xt=d(De),V=d(He),At=d(qe),Ht=d(ke),Nt=d(Ne),Pt=d(We),It=d(je),_t=d(wt);function qt(){return vt("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:ze})}function kt(){return qt().use().event}const E={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function Ft(e={}){const t={options:e,rootNode:ce(),staticRoutesMap:{}},n=r=>e.strictTrailingSlash?r:r.replace(/\/$/,"")||"/";if(e.routes)for(const r in e.routes)X(t,n(r),e.routes[r]);return{ctx:t,lookup:r=>Lt(t,n(r)),insert:(r,o)=>X(t,n(r),o),remove:r=>Ot(t,n(r))}}function Lt(e,t){const n=e.staticRoutesMap[t];if(n)return n.data;const r=t.split("/"),o={};let i=!1,s=null,a=e.rootNode,c=null;for(let l=0;l<r.length;l++){const p=r[l];a.wildcardChildNode!==null&&(s=a.wildcardChildNode,c=r.slice(l).join("/"));const v=a.children.get(p);if(v===void 0){if(a&&a.placeholderChildren.length>1){const h=r.length-l;a=a.placeholderChildren.find(f=>f.maxDepth===h)||null}else a=a.placeholderChildren[0]||null;if(!a)break;a.paramName&&(o[a.paramName]=p),i=!0}else a=v}return(a===null||a.data===null)&&s!==null&&(a=s,o[a.paramName||"_"]=c,i=!0),a?i?{...a.data,params:i?o:void 0}:a.data:null}function X(e,t,n){let r=!0;const o=t.split("/");let i=e.rootNode,s=0;const a=[i];for(const c of o){let l;if(l=i.children.get(c))i=l;else{const p=Mt(c);l=ce({type:p,parent:i}),i.children.set(c,l),p===E.PLACEHOLDER?(l.paramName=c==="*"?`_${s++}`:c.slice(1),i.placeholderChildren.push(l),r=!1):p===E.WILDCARD&&(i.wildcardChildNode=l,l.paramName=c.slice(3)||"_",r=!1),a.push(l),i=l}}for(const[c,l]of a.entries())l.maxDepth=Math.max(a.length-c,l.maxDepth||0);return i.data=n,r===!0&&(e.staticRoutesMap[t]=i),i}function Ot(e,t){let n=!1;const r=t.split("/");let o=e.rootNode;for(const i of r)if(o=o.children.get(i),!o)return n;if(o.data){const i=r.at(-1)||"";o.data=null,Object.keys(o.children).length===0&&o.parent&&(o.parent.children.delete(i),o.parent.wildcardChildNode=null,o.parent.placeholderChildren=[]),n=!0}return n}function ce(e={}){return{type:e.type||E.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function Mt(e){return e.startsWith("**")?E.WILDCARD:e[0]===":"||e==="*"?E.PLACEHOLDER:E.NORMAL}const ue=[],Dt=jt(ue.filter(e=>e.page));function jt(e){function t(n,r,o,i){const s=Object.values(n).find(a=>o.startsWith(a.id+"/"));return s?(t(s.children||(s.children=[]),r,o.slice(s.id.length)),n):(n.push({...r,id:o,path:o.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"")}),n)}return e.sort((n,r)=>n.path.length-r.path.length).reduce((n,r)=>t(n,r,r.path,r.path),[])}function Wt(e,t){const n=zt.lookup(e);if(n&&n.route){const r=n.route[`$${t}`];return r===void 0?void 0:{handler:r,params:n.params}}}function Ut(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const zt=Ft({routes:ue.reduce((e,t)=>{if(!Ut(t))return e;let n=t.path.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"").replace(/\*([^/]*)/g,(r,o)=>`**:${o}`);if(/:[^/]*\?/g.test(n))throw new Error(`Optional parameters are not supported in API routes: ${n}`);if(e[n])throw new Error(`Duplicate API routes for "${n}" found at "${e[n].route.path}" and "${t.path}"`);return e[n]={route:t},e},{})}),F=Symbol("fetchEvent");function Bt(e){return{request:_t(e),response:Gt(e),clientAddress:Et(e),locals:{},nativeEvent:e}}function Jt(e){if(!e[F]){const t=Bt(e);e[F]=t}return e[F]}class Kt{event;constructor(t){this.event=t}get(t){const n=Q(this.event,t);return Array.isArray(n)?n.join(", "):n||null}has(t){return this.get(t)!==void 0}set(t,n){return Tt(this.event,t,n)}delete(t){return It(this.event,t)}append(t,n){xt(this.event,t,n)}getSetCookie(){const t=Q(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(N(this.event)).forEach(([n,r])=>t(Array.isArray(r)?r.join(", "):r,n,this))}entries(){return Object.entries(N(this.event)).map(([t,n])=>[t,Array.isArray(n)?n.join(", "):n])[Symbol.iterator]()}keys(){return Object.keys(N(this.event))[Symbol.iterator]()}values(){return Object.values(N(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function Gt(e){return{get status(){return Y(e)},set status(t){M(e,t)},get statusText(){return Rt(e)},set statusText(t){M(e,Y(),t)},headers:new Kt(e)}}function Yt(e){e.forEach(t=>{if(!t.attrs.href)return;let n=document.head.querySelector(`link[href="${t.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",t.attrs.href),document.head.appendChild(n))})}function Qt(e,t,n,r="default"){return Re(async()=>{{const i=(await e.import())[r],a=(await t.inputs?.[e.src].assets()).filter(l=>l.tag==="style"||l.attrs.rel==="stylesheet");return typeof window<"u"&&Yt(a),{default:l=>[...a.map(p=>O(p)),Te(i,l)]}}})}function Vt(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,info:{...n.$$route?n.$$route.require().route.info:{},filesystem:!0},component:n.$component&&Qt(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return Dt.map(e)}function Xt(e){const t=At(e.nativeEvent,"flash");if(!t)return;let n=JSON.parse(t);if(!n||!n.result)return;const r=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])];return Ht(e.nativeEvent,"flash","",{maxAge:0}),{input:r,url:n.url,pending:!1,result:n.error?new Error(n.result):n.result}}async function Zt(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:Xt(e)},routes:Vt(),complete:!1,$islands:new Set})}const en=new Set([301,302,303,307,308]);function D(e){return e.status&&en.has(e.status)?e.status:302}function tn(e,t,n={}){return Ue({handler:r=>{const o=Jt(r);return xe(o,async()=>{const i=Wt(new URL(o.request.url).pathname,o.request.method);if(i){const f=(await i.handler.import())[o.request.method];o.params=i.params||{},_.context={event:o};const R=await f(o);if(R!==void 0)return R;if(o.request.method!=="GET")throw new Error(`API handler for ${o.request.method} "${o.request.url}" did not return a response.`)}const s=await t(o),a=typeof n=="function"?await n(s):{...n},c=a.mode||"stream";if(a.nonce&&(s.nonce=a.nonce),c==="sync"){const h=ve(()=>(_.context.event=s,e(s)),a);if(s.complete=!0,s.response&&s.response.headers.get("Location")){const f=D(s.response);return V(r,s.response.headers.get("Location"),f)}return h}if(a.onCompleteAll){const h=a.onCompleteAll;a.onCompleteAll=f=>{ee(s)(f),h(f)}}else a.onCompleteAll=ee(s);if(a.onCompleteShell){const h=a.onCompleteShell;a.onCompleteShell=f=>{Z(s,r)(),h(f)}}else a.onCompleteShell=Z(s,r);const l=Ce(()=>(_.context.event=s,e(s)),a);if(s.response&&s.response.headers.get("Location")){const h=D(s.response);return V(r,s.response.headers.get("Location"),h)}if(c==="async")return l;const{writable:p,readable:v}=new TransformStream;return l.pipeTo(p),v})}})}function Z(e,t){return()=>{if(e.response&&e.response.headers.get("Location")){const n=D(e.response);M(t,n),Nt(t,"Location",e.response.headers.get("Location"))}}}function ee(e){return({write:t})=>{e.complete=!0;const n=e.response&&e.response.headers.get("Location");n&&t(`<script>window.location="${n}"<\/script>`)}}function nn(e,t){return tn(e,Zt,t)}var rn=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico">',"</head>"],sn=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const dn=nn(()=>g(mt,{document:({assets:e,children:t,scripts:n})=>u(sn,b(),g(re,{get children(){return u(rn,C(e))}}),C(t),C(n))}));export{dn as default};
